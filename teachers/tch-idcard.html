<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>教師證</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://shierusha.github.io/school-battle/teachers/th.css">
</head>
<body>
 
<div class="flip-card" id="flipCard">
<div class="flip-card-inner">
      <!-- 正面BG ------------------------------------->  
<div class="flip-card-front">
<div  class="container-16-9">
  <img class="bg-img" src="https://shierusha.github.io/school-battle/teachers/img/1.webp" alt="background" />

<!-- 正面 ----------------------------------->
<div class="imgarea"> 
  <img class="char-img" src="https://shierusha.github.io/school-battle/teachers/img/papa.png" alt="teacherimg">
</div>
  
<div class="bigname-box">
  <div class="name-box bigname">帕洛斯・特帕爾</div>
</div>
  
<div class="littlename-box">
  <div class="name-box littlename">帕帕</div>
</div>

<div class="row">
  <div class="row-1" style="left: 0;  width: 100%;">
    <div class="info-box" style="height:7%;width: 49%;">
      <span class="info-label">陣營</span>
      <span class="info-value">白色陣營</span>
    </div>

    <div class="info-box" style="height:7%;width: 49%;">
      <span class="info-label">種族</span>
      <span class="info-value">團長大人的愛</span>
    </div>

    <div class="info-row" style="gap:2%;height:7%;width: 49%;">
      <div class="info-box" style=" width:49%;">
        <span class="info-label">年齡</span>
        <span class="info-value">25</span>
      </div>
      <div class="info-box" style=" width:49%;">
        <span class="info-label">性別</span>
        <span class="info-value">帕帕</span>
      </div>
    </div>

    <div class="info-box" style="height:15%;width: 49%;">
      <span class="info-label">個性</span>
      <span class="info-value" >非常......騷?
討厭暴力
行為舉止夾帶著一股優雅的氣質
      </span>
  <button class="show-more-btn" style="display:none;">...MORE</button>


    </div>

    <div class="info-box" style="height:7%;width: 49%;">
      <span class="info-label">喜歡</span>
      <span class="info-value">漂亮美好的事物</span>
  <button class="show-more-btn" style="display:none;">...MORE</button>

    </div>

    <div class="info-box" style="height:7%;width: 49%;">
      <span class="info-label">討厭</span>
      <span class="info-value">動粗、爆粗口、醜陋的事物</span>
  <button class="show-more-btn" style="display:none;">...MORE</button>

    </div> 
    <div class="info-box" style="height:7%;border-radius:5px 5px 0px 0px;">
      <span class="info-label">角色備註</span>
      <span style="color: #495079; font-weight: 700;  letter-spacing: 0.05em; padding-left: 0.3em;  align-self: center;
 ">裏設定</span>

    </div>

    <div class="info-box" style="height:31%;margin-top:-1.3%;border-radius:0px 0px 5px 5px;">
      
      <span class="info-label" style="display: none;">角色備註/裏設定</span>
      <span class="info-value"  style="margin-top: 0.35em;">她的性別認同是女生
所以都是用女廁跟女澡堂/女湯喔
如果要需要稱呼請稱呼她為小姐喔!
      </span>
  <button class="show-more-btn" style="display:none;">...MORE</button>
    </div>  
  </div>

  <div class="row-1" style="right:0; height: 90%;">
    <div class="info-row" style="gap:2%; height:7.63%;">
      <div class="info-box" style=" width:49%;">
        <span class="info-label">身高</span>
        <span class="info-value">174</span>
      </div>
      <div class="info-box" style=" width:49%;">
        <span class="info-label">體重</span>
        <span class="info-value">66</span>
      </div>
    </div>

    <div class="info-box" style="height:7%;border-radius:5px 5px 0px 0px;">
      <span class="info-label">背景故事</span>
      <span style="color: #495079;
  font-weight: 700;  letter-spacing: 0.05em; padding-left: 0.3em;  align-self: center;
 ">設定</span>
    </div>
    <div class="info-box" style="height:49.8%;margin-top:-2.8%;border-radius:0px 0px 5px 5px;">
      <span class="info-label" style="display: none;">背景故事/設定</span>
      <span class="info-value" style="margin-top: 0.35em;">15歲時被年輕的騎士團長所幫助
發誓要追隨騎士團長並加入的騎士團訓練營
曾經因為中性的外表被嘲笑
但憑藉著自身魔法的天賦與劍術
輕鬆打敗了眾多譏笑她的人

強大的實力被騎士團看中
卻發現騎士團已經非常腐敗
還跟外面不良集團合夥做了很多違法事業

為了更接近團長 他認同了腐敗的騎士團
放開了自我壓抑
選擇了對自己最輕鬆的生活方式
用強大的實力爬到隊長的位置
成為強大的魔劍士隊長
然而卻也因為追隨騎士團長
自己也染上了不少惡習

在一次肅清騎士團的行動中
自身阻擋兩名強大的先鋒隊
最終被強大到像是開掛的先鋒隊砍成兩半
直到最後都堅持幫助團長
用魔法創造了巨大的火焰爆炸後
失血過多身亡

"即使如此 我仍舊追隨於您 親愛的團長"

死後靈魂不知為何掉落到了謝爾夏的世界
甚致本該被一刀兩斷的身體都完好無缺
賣掉了所有騎士相關的東西
換了一身新服裝 
以此希望拋棄過去 重新過活
只留下一把軍刀作為紀念

來到謝爾夏世界的他
不知為何失去了所有魔力與魔力感知
再也無法操控魔法了
為了生活
因緣際會來到學校當數學老師
      </span>
  <button class="show-more-btn" style="display:none;">...MORE</button>

    </div> 
  </div>
    
</div>
          <!-- 正面 ----------------------------------->
</div>
</div>
</div>
</div>


<div id="info-modal" class="modal-overlay" style="display:none;">
  <div class="modal-content">
    <div class="modal-header" id="info-modal-title">標題</div>
    <div class="modal-body" id="info-modal-body"></div>
  </div>
</div>

<script src="teachers-data.js"></script>

<script>
function setNameFontSize(selector, maxChars) {
  document.querySelectorAll(selector).forEach(box => {
    const nameDiv = box.querySelector('.name-box');
    if (!nameDiv) return;
    const fontSize = box.offsetHeight / maxChars * 0.98;
    nameDiv.style.fontSize = fontSize + "px";
  });
}

function fitAllNameBoxes() {
  setNameFontSize('.bigname-box', 12);
  setNameFontSize('.littlename-box', 9);
}

function setInfoBoxFontSize() {
  const infoBoxes = document.querySelectorAll('.info-box');
  if (!infoBoxes.length) return;
  let minHeight = Infinity;
  infoBoxes.forEach(box => {
    const h = box.offsetHeight;
    if (h < minHeight) minHeight = h;
  });
  const fontSize = minHeight * 0.62;
  infoBoxes.forEach(box => {
    box.style.fontSize = fontSize + "px";
  });
}

function fitAll() {
  fitAllNameBoxes();
  setInfoBoxFontSize();
}

window.addEventListener('DOMContentLoaded', fitAll);
window.addEventListener('resize', fitAll);
window.addEventListener('load', fitAll);



  // 更多
// 判斷 info-value 超過 13 字才顯示 ...MORE
function checkLongTextByCharCount(N = 13) {
  document.querySelectorAll('.info-box').forEach(box => {
    const value = box.querySelector('.info-value');
    const btn = box.querySelector('.show-more-btn');
    if (!value || !btn) return;
    if (value.innerText.trim().length > N) {
      btn.style.display = 'block';
      btn.onclick = function() {
        const label = box.querySelector('.info-label')?.innerText || "內容";
        showInfoModal(label, value.innerHTML);
      }
    } else {
      btn.style.display = 'none';
    }
  });
}
// 初次和視窗大小變動時都要判斷一次
window.addEventListener('DOMContentLoaded', () => checkLongTextByCharCount(13));
window.addEventListener('resize', () => checkLongTextByCharCount(13));



// 彈跳視窗相關
function showInfoModal(title, content) {
  document.getElementById('info-modal-title').innerText = title;
  document.getElementById('info-modal-body').innerHTML = content;
  document.getElementById('info-modal').style.display = 'flex';
}

// 點背景關閉彈窗
document.getElementById('info-modal').addEventListener('click', function(e) {
  if (e.target === this) this.style.display = 'none';
});


//帶入老師參數
function applyTeacherData() {
  const urlParams = new URLSearchParams(window.location.search);
  const teacherId = urlParams.get("teacher") || "papa";
  const teacher = window.teachers?.[teacherId];
  if (!teacher) return;

  // 自動控制背景濾鏡
  if (teacher.useDarkBg) {
    document.body.classList.add("dark-bg");
  } else {
    document.body.classList.remove("dark-bg");
  }
  // 套圖片與名字
  document.querySelector(".char-img").src = teacher.img;
  document.querySelector(".bg-img").src = teacher.bg;
  document.querySelector(".bigname").textContent = teacher.bigname;
  document.querySelector(".littlename").textContent = teacher.littlename;

  // 套 info-label 對應內容
  document.querySelectorAll(".info-box").forEach(box => {
    const label = box.querySelector(".info-label");
    const value = box.querySelector(".info-value");
    if (!label || !value) return;

    const key = label.textContent.trim();
    if (teacher.info[key] !== undefined) {
      value.textContent = teacher.info[key];
    }
  });

  // 字體與 MORE 重新確認
  fitAll();
  checkLongTextByCharCount(13);
}

window.addEventListener("DOMContentLoaded", applyTeacherData);

//黑白濾境
window.addEventListener("DOMContentLoaded", () => {
  const toggleBtn = document.getElementById('toggleBgBtn');
  if (toggleBtn) {
    toggleBtn.onclick = function() {
      document.body.classList.toggle('dark-bg');
    }
  }
});

</script>


</body>
</html>
